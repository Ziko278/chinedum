{% extends 'admin_layout.html' %}
{% block 'page_name' %} <p>Inventory <a href="#" class="btn btn-success" id="print" style="float:right">PRINT</a> </p> {%endblock %}
{% block 'sub_page_name' %} Report  {%endblock %}
{% block 'main_content' %}
{% load static %}
<section class="panel">
    <div class="row">
    <div class="col-md-5">
        <form method="POST" action="{% url 'inventory_date_report' 'date' %}">
            {% csrf_token %}
            <div class="form-group">
                <label class="control-label col-md-2"><b>Single Date</b></label>
                <div class="col-md-9">
                     <input type="hidden" name="statistic_type" value="date">
                    <input type="date"  style='width:150px;display:inline;' required size="16" class="form-control" name='start_date'>
                    <input type='submit' style='display:inline;' class= 'btn btn-info' value='CHECK'  />
                </div>
            </div>
        </form>
    </div>

    <div class="col-lg-7">
        <form method="POST" action="{% url 'inventory_date_report' 'date' %}" />
        {% csrf_token %}
            <div class="form-group">
                <label class="control-label col-sm-2"><b>Range Date</b></label>
                <div class="col-md-10">
                     <input type="hidden" name="statistic_type" value="range">
                    <input type="date"  style='width:150px;display:inline;' size="16" required class="form-control" name='start_date'>
                    <input type="date"  style='width:150px;display:inline;' size="16" required class="form-control" name='end_date'>
                    <input type='submit' style='display:inline;' class= 'btn btn-info' value='CHECK'  />
                </div>
            </div>
        </form>
    </div>
</div>
    <div class="col-lg-12">
        <div class="modal-body">

          <div class="col-lg-12" id="print-detail">
            <section class="panel">
              <header  class="text-center panel-heading">
                <h3 style="color:black;text-align:center" class='text-center'>CHINEDUM ENTERPRISE STORE INVENTORY SALES REPORT </h3>
              </header>
              <div class="table-responsive">
                <table class="table">
                  <thead>
                    <tr style="border-bottom:2px solid skyblue;">
                      <th style="border:2px solid skyblue;" class='text-center'>S/N</th>
                      <th style="border:2px solid skyblue;" class='text-center'>Item</th>
                      <th style="border:2px solid skyblue;"  class='text-center'>Avg Cost Price</th>
					            <th style="border:2px solid skyblue;"  class='text-center'>Qty sold</th>
                      <th style="border:2px solid skyblue;" class='text-center'>Avg Selling price (N)</th>
					            <th style="border:2px solid skyblue;" class='text-center'>Total Selling Price (N)</th>
                      <th style="border:2px solid skyblue;" class='text-center'>Total Profit (N)</th>
                    </tr>
                  </thead>
                  <tbody >
                  {% for report in report_list %}
                    <tr style='border-bottom:2px solid skyblue;'>
                      <td style="border:2px solid skyblue;" class='text-center'>{{ forloop.counter }}</td>
                      <td style="border:2px solid skyblue;" class='text-center' style='font-family:courier;' class=''>{{ report.name|upper }}</td>
                      <td style="border:2px solid skyblue;" class='text-center'>{{ report.cost_price.unit_cost_price__avg|floatformat }}</td>
                      <td style="border:2px solid skyblue;" class='text-center'>{% if report.quantity.quantity__sum %} {{ report.quantity.quantity__sum }} {% endif %}</td>
                      <td style="border:2px solid skyblue;" class='text-center'>{{ report.selling_price.unit_selling_price__avg|floatformat }}</td>

                      <td style="border:2px solid skyblue;" class='text-center'> {{ report.total_price.total_price__sum }}</td>
                        <td style="border:2px solid skyblue;" class='text-center'>{{ report.profit }}</td>


                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
                <div class="row">
                  <div class="col-md-3">
                  </div>
                  <div class="col-md-3">
                  </div>

                  <div class="col-md-3">
                      <h4 style="color:tomato;"><b>Total Sales: N {{ total_sale|floatformat }}</b></h4>
                  </div>
                  <div class="col-md-3">
                       <h4 style="color:tomato;"><b>Total Profit: N {{ total_profit|floatformat }} </b></h4>
                  </div>

                </div>
              </div>

            </section>
          </div>
        </div>
<script src="{% static 'scripts/jquery.js' %}"></script>
<script src="http://localhost/inventory-management/public/js/jquery.slimscroll.min.js"></script>
<script type='text/javascript'>
$(document).ready(function(){
	$('#print').click(function(){
		data = $('#print-detail').html()
        var myWindow= window.open('','','')
        myWindow.document.write(data)
        myWindow.print();
	})
})


</script>
        </div>
    </div>
</section>
{% endblock %}